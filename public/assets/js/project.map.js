(()=>{function t(t){var e,n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{lat:51.1657,lng:10.4515},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,i=null!==(e=localStorage.getItem("mapZoomLevel"))&&void 0!==e?e:a,s=localStorage.getItem("mapCenterLat"),l=localStorage.getItem("mapCenterLng"),r=s&&l?{lat:parseFloat(s),lng:parseFloat(l)}:o,c=document.getElementById(t),p=function(){try{var t=c.getAttribute("data");return c.setAttribute("data",""),t?JSON.parse(t):[]}catch(t){return console.error("Failed to parse marker locations from the data attribute.",t),[]}}(),d=[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"poi.business",stylers:[{visibility:"off"}]},{featureType:"poi.medical",stylers:[{visibility:"off"}]},{featureType:"poi.school",stylers:[{visibility:"off"}]},{featureType:"poi.sports_complex",stylers:[{visibility:"off"}]},{featureType:"poi.park",stylers:[{visibility:"off"}]},{featureType:"transit.station",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"off"}]}],u=[],f=new google.maps.Map(c,{center:r,zoom:parseInt(i),mapTypeId:"terrain",streetViewControl:!1,mapTypeControl:!1,styles:d}),m=[],g=null;function h(t){return{path:"M33,13.924C33,6.893,27.594,1,20.51,1S8,6.897,8,13.93C8,16.25,8.324,18,9.423,20H9.402l10.695,20.621 c0.402,0.551,0.824-0.032,0.824-0.032C20.56,41.13,31.616,20,31.616,20h-0.009C32.695,18,33,16.246,33,13.924z M14.751,13.528 c0-3.317,2.579-6.004,5.759-6.004c3.179,0,5.76,2.687,5.76,6.004s-2.581,6.005-5.76,6.005C17.33,19.533,14.751,16.846,14.751,13.528 z",strokeColor:"#222",strokeWeight:1,fillColor:t,fillOpacity:1,scale:.6,anchor:new google.maps.Point(21,42),labelOrigin:new google.maps.Point(20,60)}}function v(t,e,n){f.panTo({lat:t,lng:e}),g&&(g.close(),g=null);var o=m[n];if(o){var a=new google.maps.InfoWindow({content:o.html.getContent()});a.open(f,o),g=a}}f.addListener("zoom_changed",(function(){var t=f.getZoom();localStorage.setItem("mapZoomLevel",t)})),google.maps.event.addListener(f,"zoom_changed",(function(){m.forEach((function(t){var e=t.getPosition();t.setPosition(e)}))})),f.addListener("center_changed",(function(){var t=f.getCenter();localStorage.setItem("mapCenterLat",t.lat()),localStorage.setItem("mapCenterLng",t.lng())})),$(document).on("click",".map-wrapper .tab-link",(function(t){t.preventDefault();var e=$(this).attr("id"),n=Number($(this).data("lat")),o=Number($(this).data("long")),a=p.findIndex((function(t){return t.id==e}));-1!==a&&v(n,o,a)})),$("#searchInput").on("input",(function(){var t=$(this).val().toLowerCase(),e=[];t?($("#allprojects").hasClass("active")||($(".tab-pane.fade").removeClass("active show"),$("#allprojects").addClass("active show")),$("#allprojects li.tab-item").each((function(){var n=$(this).find("a").text().toLowerCase().includes(t);if(n){var o=parseInt($(this).find("a").attr("id"));e.push(o)}var a=new google.maps.LatLngBounds;p.forEach((function(t,n){var o=m[n],i=parseInt(t.id);e.includes(i)?(o.setVisible(!0),a.extend(new google.maps.LatLng(t.lat,t.lng))):o.setVisible(!1)})),a.isEmpty()||f.fitBounds(a),$(this).toggle(n)}))):p.forEach((function(t,e){m[e].setVisible(!0)}))})),$(document).on("click",".nav-link",(function(t){t.preventDefault();var e=$(this).attr("id").replace("tab-",""),n=[];$("#"+e).find("a").each((function(){var t=parseInt($(this).attr("id"));n.push(t)}));var o=new google.maps.LatLngBounds;p.forEach((function(t,e){var a=m[e],i=parseInt(t.id);n.includes(i)?(a.setVisible(!0),o.extend(new google.maps.LatLng(t.lat,t.lng))):a.setVisible(!1)})),o.isEmpty()||f.fitBounds(o)})),n=new google.maps.LatLngBounds,p.forEach((function(t,e){var o=function(t,e){var n=new google.maps.InfoWindow({content:t.content}),o=new google.maps.Marker({position:new google.maps.LatLng(t.lat,t.lng),map:f,icon:h(t.backgrounColor),html:n,animation:google.maps.Animation.DROP,locationIndex:e});return function(t,e){var n=!1;t.addListener("mouseover",(function(t){n||(e.setContent(this.html),e.setPosition(t.latLng),e.open(f,this))})),t.addListener("mouseout",(function(){n||e.close()})),t.addListener("click",(function(t){n?(e.close(),n=!1):(e.setContent(this.html),e.setPosition(t.latLng),e.open(f,this),n=!0)}))}(o,n),m.push(o),o.getPosition()}(t,e);n.extend(o)})),i||f.fitBounds(n),setTimeout((function(){!function(t,e,n,o){var a=!0,i=document.createElement("button");i.textContent="POI Visibility",i.classList="bg-white rounded px-2 shadow-sm py-sm-1 font-semibold",i.style.position="absolute",i.style.top="10px",i.style.left="10px",i.style.zIndex="999",e.appendChild(i),i.addEventListener("click",(function(){a=!a,t.setOptions({styles:a?n:o})}))}(f,c,d,u),function(t,e){var n=!0,o=document.createElement("button");o.textContent="Label Visibility",o.classList="bg-white rounded px-2 shadow-sm py-sm-1 font-semibold",o.style.position="absolute",o.style.top="50px",o.style.left="10px",o.style.zIndex="999",e.appendChild(o),o.addEventListener("click",(function(){n=!n,p.forEach((function(t,e){var o=m[e];n?o.setLabel(null):o.setLabel({text:t.name,color:"#222222",fontSize:"15px",fontWeight:"bold",className:"project-label"})}))}))}(0,c)}),2e3)}document.addEventListener("DOMContentLoaded",(function(){new t("map"),$("footer").remove()}))})();